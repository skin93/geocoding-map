(function(){"use strict";var e={6437:function(e,t,o){var r=o(9242),l=o(3396);function s(e,t){const o=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(o)}var a=o(89);const n={},i=(0,a.Z)(n,[["render",s]]);var u=i,c=o(678),p=o(4870),d=o(3153),v=o.n(d),f=o(7139);const m={class:"h-screen absolute w-full z-10 flex justify-center items-start pt-[125px] bg-black/50"},g={class:"flex flex-col bg-white w-[80%] sm:w-[450px] px-6 py-4 rounded-md"},h={class:"text-lg mb-1"},w=(0,l._)("p",{class:"text-sm mb-4"}," To take advantage of this application features, please ensure location services are enabled ",-1);var x={props:{geoErrorMsg:String},setup(e){const t=e;return(e,o)=>((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("div",g,[(0,l._)("h1",h,"Error: "+(0,f.zw)(t.geoErrorMsg),1),w,(0,l._)("button",{onClick:o[0]||(o[0]=t=>e.$emit("closeGeoError")),class:"self-start py-2 px-4 bg-red-500 text-white rounded-md text-sm"}," Close ")])]))}};const b=x;var y=b;const k={class:"h-full w-full flex items-center justify-center"},_=(0,l._)("span",{class:"block w-[60px] h-[60px] border-[5px] border-solid border-transparent border-t-black rounded-full animate-spin"},null,-1),O=[_];function S(e,t){return(0,l.wg)(),(0,l.iD)("div",k,O)}const z={},C=(0,a.Z)(z,[["render",S]]);var j=C,R=o(6265),H=o.n(R);const T={class:"w-full md:w-auto absolute md:top-[40px] md:left-[60px] z-[2] flex gap-4 px-6 py-8 md:px-0 md:py-0 bg-transparent"},L={class:"relative flex-1 md:min-w-[350px]"},M=(0,l._)("div",{class:"absolute top-0 left-[8px] h-full flex items-center"},[(0,l._)("i",{class:"fas fa-search"})],-1),U={class:"absolute mt-2 w-full"},E={key:0,class:"h-[200px] overflow-scroll bg-white rounded-md"},I={key:1},J=["onClick"],V=(0,l._)("i",{class:"fas fa-map-marker-alt"},null,-1),D={class:"text-xs"},P={key:1,class:"mt-2 px-4 py-3 bg-white rounded-md"},G={class:"text-lg"},Y={class:"text-xs mb-1"},Z={class:"text-xs"};var $={props:{coords:Object,fetchCoords:Boolean,searchResults:Boolean},emits:["plotResult, toggleSearchResults, removeResult"],setup(e,{emit:t}){const o=e,s=(0,p.iH)(null),a=(0,p.iH)(null),n=(0,p.iH)(null),i=(0,p.iH)(null),u=()=>{clearTimeout(n.value),a.value=null,n.value=setTimeout((async()=>{if(""!==s.value){const e=new URLSearchParams({fuzzyMatch:!0,language:"en",limit:10,proximity:o.coords?`${o.coords.lng},${o.coords.lat}`:"0,0"}),t=await H().get(`api/search/${s.value}?${e}`);a.value=t.data.features}}),750)},c=e=>{i.value=e,t("plotResult",e.geometry)},d=()=>{i.value=null,t("removeResult")};return(t,n)=>((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("div",L,[(0,l.wy)((0,l._)("input",{class:"pl-9 pr-4 py-3 text-sm focus:outline-none w-full shadow-md rounded-md",type:"text",placeholder:"Start your search","onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),onInput:u,onFocus:n[1]||(n[1]=e=>t.$emit("toggleSearchResults"))},null,544),[[r.nr,s.value]]),M,(0,l._)("div",U,[s.value&&e.searchResults?((0,l.wg)(),(0,l.iD)("div",E,[a.value?((0,l.wg)(),(0,l.iD)("div",I,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.value,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"px-4 py-2 flex gap-x-2 cursor-pointer hover:bg-slate-600 hover:text-white",key:t,onClick:t=>c(e)},[V,(0,l._)("p",D,(0,f.zw)(e.place_name_en),1)],8,J)))),128))])):((0,l.wg)(),(0,l.j4)((0,p.SU)(j),{key:0}))])):(0,l.kq)("",!0),i.value?((0,l.wg)(),(0,l.iD)("div",P,[(0,l._)("i",{onClick:d,class:"far fa-times-circle flex justify-end"}),(0,l._)("h1",G,(0,f.zw)(i.value.text),1),(0,l._)("p",Y,(0,f.zw)(i.value.properties.address)+", "+(0,f.zw)(i.value.city)+" "+(0,f.zw)(i.value.state),1),(0,l._)("p",Z,(0,f.zw)(i.value.properties.category),1)])):(0,l.kq)("",!0)])]),(0,l._)("div",{class:(0,f.C_)([{"bg-slate-600":o.coords},"px-4 bg-white flex items-center shadow-md rounded-md min-h-[45px]"]),onClick:n[2]||(n[2]=e=>t.$emit("getLocation"))},[(0,l._)("i",{class:(0,f.C_)([{"text-white":o.coords,"animate-pulse":o.fetchCoords},"fas fa-location-arrow text--slate-600 text-[18px]"])},null,2)],2)]))}};const N=$;var F=N;const X={class:"h-screen relative"},q=(0,l._)("div",{id:"map",class:"h-full z-[1]"},null,-1);var W={setup(e){let t;const r=(0,p.iH)(null),s=(0,p.iH)(null),a=(0,p.iH)(null),n=(0,p.iH)(null),i=(0,p.iH)(null),u=(0,p.iH)(null),c=(0,p.iH)(null),d=()=>r.value?(r.value=null,sessionStorage.removeItem("coords"),void t.removeLayer(a.value)):sessionStorage.getItem("coords")?(r.value=JSON.parse(sessionStorage.getItem("coords")),void h(r.value)):(s.value=!0,void navigator.geolocation.getCurrentPosition(f,m)),f=e=>{s.value=!1;const t={lat:e.coords.latitude,lng:e.coords.longitude};sessionStorage.setItem("coords",JSON.stringify(t)),r.value=t,h(r.value)},m=e=>{s.value=null,n.value=!0,i.value=e.message},g=e=>{n.value=null,i.value=e.null},h=e=>{const r=v().icon({iconUrl:o(3266),iconSize:[35,35]});a.value=v().marker([e.lat,e.lng],{icon:r}).addTo(t),t.setView([e.lat,e.lng],10)},w=e=>{u.value&&t.removeLayer(u.value);const r=v().icon({iconUrl:o(2929),iconSize:[35,35]});u.value=v().marker([e.coordinates[1],e.coordinates[0]],{icon:r}).addTo(t),t.setView([e.coordinates[1],e.coordinates[0]],14),b()},x=()=>{c.value=!c.value},b=()=>{c.value=null},k=()=>{t.removeLayer(u.value)};return(0,l.bv)((()=>{t=v().map("map").setView([51.505,-.09],13),v().tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic2tpbnUiLCJhIjoiY2wwY2JsYXdpMTNyZTNrcXVrOWE4OHc2eSJ9.GtFLs3RA9POhZVmzQUVG4g",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1Ijoic2tpbnUiLCJhIjoiY2wwY2JsYXdpMTNyZTNrcXVrOWE4OHc2eSJ9.GtFLs3RA9POhZVmzQUVG4g"}).addTo(t),t.on("moveend",(()=>{b()})),d()})),(e,t)=>((0,l.wg)(),(0,l.iD)("h1",X,[n.value?((0,l.wg)(),(0,l.j4)((0,p.SU)(y),{key:0,geoErrorMsg:i.value,onCloseGeoError:g},null,8,["geoErrorMsg"])):(0,l.kq)("",!0),(0,l.Wm)((0,p.SU)(F),{coords:r.value,fetchCoords:s.value,searchResults:c.value,onGetLocation:d,onPlotResult:w,onToggleSearchResults:x,onRemoveResult:k},null,8,["coords","fetchCoords","searchResults"]),q]))}};const A=W;var B=A;const Q=[{path:"/",name:"home",component:B}],K=(0,c.p7)({history:(0,c.PO)("/"),routes:Q});var ee=K;(0,r.ri)(u).use(ee).mount("#app")},2929:function(e,t,o){e.exports=o.p+"img/map-marker-blue.48a8e449.svg"},3266:function(e,t,o){e.exports=o.p+"img/map-marker-red.d479dee5.svg"}},t={};function o(r){var l=t[r];if(void 0!==l)return l.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,r,l,s){if(!r){var a=1/0;for(c=0;c<e.length;c++){r=e[c][0],l=e[c][1],s=e[c][2];for(var n=!0,i=0;i<r.length;i++)(!1&s||a>=s)&&Object.keys(o.O).every((function(e){return o.O[e](r[i])}))?r.splice(i--,1):(n=!1,s<a&&(a=s));if(n){e.splice(c--,1);var u=l();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,l,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var l,s,a=r[0],n=r[1],i=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(l in n)o.o(n,l)&&(o.m[l]=n[l]);if(i)var c=i(o)}for(t&&t(r);u<a.length;u++)s=a[u],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(6437)}));r=o.O(r)})();
//# sourceMappingURL=app.ccf7cfed.js.map